<!DOCTYPE html>
<html>
<head>
  <title>Lane Ownership - Live RTO Tracking</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- GOOGLE MAPS + PLACES + DIRECTIONS -->
  <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBEbLeeT2G2czmJ5JMTckUj6qZJ3oqXg7k&libraries=places,directions,geometry"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    *{font-family:'Inter',sans-serif;}
    .glass{backdrop-filter:blur(30px);background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);}
    .gradient-bg{background:linear-gradient(135deg,#0f0f23 0%,#1a1a2e 50%,#16213e 100%);}
    #map{height:700px;border-radius:20px;box-shadow:0 25px 50px rgba(0,0,0,0.5);}
    .pac-container { background-color: #1f2937 !important; color: white !important; z-index: 10000 !important; }
    .pac-item { color: white !important; background: #374151 !important; }
    .pac-item:hover { background-color: #3b82f6 !important; }
    .fade-in{animation:fadeIn 0.8s ease-out;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
  </style>
</head>
<body class="gradient-bg text-white min-h-screen p-4 md:p-8">
  
  <!-- RTO VERIFIED LOGIN -->
  <div id="loginScreen" class="fixed inset-0 flex items-center justify-center z-50 bg-black/80 backdrop-blur-sm fade-in">
    <div class="glass rounded-3xl p-12 w-full max-w-lg mx-6 shadow-2xl max-h-[90vh] overflow-y-auto">
      <div class="text-center mb-8">
        <h1 class="text-5xl font-black bg-gradient-to-r from-emerald-400 via-teal-400 to-blue-400 bg-clip-text text-transparent mb-3">Lane Ownership Pro</h1>
        <p class="text-xl text-white/70">RTO Vehicle Verification System</p>
      </div>
      
      <div class="space-y-6">
        <div>
          <label class="block text-lg font-semibold text-white mb-3">üÜî Vehicle Registration Number</label>
          <input id="regNumber" type="text" placeholder="MH04AB1234 / DL8C1234" maxlength="13" class="w-full p-5 bg-black/50 border-2 border-white/20 rounded-3xl text-2xl font-bold text-white uppercase tracking-wider focus:outline-none focus:ring-4 focus:ring-emerald-500 focus:border-emerald-500 transition-all shadow-xl">
          <div class="text-xs text-white/50 mt-2 text-center">Format: XX##XX#### (e.g. MH04AB1234)</div>
        </div>
        
        <div>
          <label class="block text-lg font-semibold text-white mb-3">üîê Last 4 Digits (Security PIN)</label>
          <input id="pin" type="password" placeholder="1234" maxlength="4" class="w-full p-5 bg-black/50 border-2 border-white/20 rounded-3xl text-2xl font-bold text-white focus:outline-none focus:ring-4 focus:ring-emerald-500 focus:border-emerald-500 transition-all shadow-xl">
        </div>
        
        <button onclick="rtoLogin()" class="w-full bg-gradient-to-r from-emerald-500 via-teal-500 to-emerald-600 hover:from-emerald-600 hover:to-teal-600 text-white font-black py-6 px-8 rounded-3xl shadow-2xl hover:shadow-3xl hover:-translate-y-2 transition-all text-xl uppercase tracking-wider">
          <span id="loginText">üîê Verify Ownership</span>
        </button>
        
        <div class="grid grid-cols-2 gap-4 p-4 bg-black/40 rounded-2xl">
          <div class="text-center">
            <div class="text-emerald-400 font-bold text-lg mb-1">MH04AB1234</div>
            <div class="text-white/70 text-sm">Rahul Sharma</div>
            <div class="text-xs text-emerald-300">PIN: 1234</div>
          </div>
          <div class="text-center">
            <div class="text-blue-400 font-bold text-lg mb-1">DL8C5678</div>
            <div class="text-white/70 text-sm">Priya Singh</div>
            <div class="text-xs text-blue-300">PIN: 5678</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN DASHBOARD -->
  <div id="mainApp" class="hidden min-h-screen">
    <!-- HEADER WITH LIVE STATS -->
    <div class="glass rounded-3xl p-8 mb-12 shadow-2xl">
      <div class="flex flex-wrap lg:flex-nowrap justify-between items-start lg:items-center gap-8">
        <div class="flex items-center flex-1">
          <div class="w-20 h-20 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-3xl flex items-center justify-center mr-6 shadow-2xl border-4 border-white/20">
            <svg class="w-12 h-12" fill="currentColor" viewBox="0 0 20 20">
              <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>
            </svg>
          </div>
          <div class="min-w-0">
            <h1 class="text-4xl lg:text-5xl font-black bg-gradient-to-r from-emerald-400 via-teal-400 to-blue-400 bg-clip-text mb-2 leading-tight">Lane Ownership Pro</h1>
            <div class="flex flex-wrap items-center gap-6 text-xl">
              <div class="bg-emerald-500/20 px-6 py-3 rounded-2xl font-bold text-emerald-400 border-2 border-emerald-400/40 shadow-lg" id="vehicleDisplay">MH04AB1234</div>
              <div class="text-2xl font-semibold text-white/90" id="ownerName">Rahul Sharma</div>
            </div>
          </div>
        </div>
        
        <div class="flex flex-wrap gap-6 items-center justify-end">
          <div class="text-center bg-gradient-to-br from-emerald-500/20 to-teal-500/20 p-6 rounded-3xl border-2 border-emerald-400/40 shadow-2xl min-w-[180px]">
            <div class="text-4xl font-black text-emerald-400 mb-1" id="liveVehicles">28,456</div>
            <div class="text-lg font-semibold text-white/80">Live Vehicles</div>
          </div>
          <button onclick="showDestinationDashboard()" class="bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-4 px-10 rounded-3xl shadow-2xl hover:shadow-3xl hover:-translate-y-1 transition-all text-xl">
            üó∫Ô∏è Plan Route
          </button>
          <button onclick="logout()" class="glass px-8 py-4 rounded-3xl font-bold text-lg hover:bg-white/20 transition-all shadow-xl">Logout</button>
        </div>
      </div>
    </div>

    <!-- LIVE LANE TRACKING DASHBOARD -->
    <div id="liveDashboard" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8 mb-12">
      <!-- FASTEST LANES -->
      <div class="glass rounded-3xl p-8 shadow-2xl hover:scale-[1.02] transition-all cursor-pointer group">
        <h3 class="text-2xl font-bold text-emerald-400 mb-6 flex items-center gap-3">
          üöÄ Fastest Lanes
        </h3>
        <div class="space-y-4">
          <div class="flex justify-between items-center p-4 bg-emerald-500/20 rounded-2xl border border-emerald-400/40">
            <span class="font-bold text-xl">NH-48 Fast Lane</span>
            <span class="text-2xl font-black text-emerald-400">112 km/h</span>
          </div>
          <div class="flex justify-between items-center p-4 bg-emerald-500/10 rounded-2xl border border-emerald-400/20">
            <span class="font-bold text-xl">NH-44 Express</span>
            <span class="text-2xl font-black text-emerald-300">98 km/h</span>
          </div>
        </div>
      </div>

      <!-- BUSIEST LANES -->
      <div class="glass rounded-3xl p-8 shadow-2xl hover:scale-[1.02] transition-all cursor-pointer group bg-gradient-to-br from-orange-500/10 to-red-500/10 border-orange-400/30">
        <h3 class="text-2xl font-bold text-orange-400 mb-6 flex items-center gap-3">
          üö® Busiest Lanes
        </h3>
        <div class="space-y-4">
          <div class="flex justify-between items-center p-4 bg-red-500/20 rounded-2xl border border-red-400/40">
            <span class="font-bold text-xl">NH-48 Slow Lane</span>
            <span class="text-2xl font-black text-red-400">2,847 vehicles</span>
          </div>
          <div class="flex justify-between items-center p-4 bg-orange-500/20 rounded-2xl border border-orange-400/40">
            <span class="font-bold text-xl">NH-19 Mid Lane</span>
            <span class="text-2xl font-black text-orange-400">1,923 vehicles</span>
          </div>
        </div>
      </div>

      <!-- LIVE VEHICLE TRACKING -->
      <div class="glass rounded-3xl p-8 shadow-2xl xl:col-span-1">
        <h3 class="text-2xl font-bold text-blue-400 mb-6 flex items-center gap-3">
          üìä Live Tracking
        </h3>
        <div class="space-y-3">
          <div class="flex justify-between text-lg">
            <span>Total Vehicles:</span>
            <span class="font-black text-2xl text-emerald-400" id="totalVehicles">28,456</span>
          </div>
          <div class="flex justify-between text-lg">
            <span>Fast Lane Users:</span>
            <span class="font-black text-blue-400">847</span>
          </div>
          <div class="flex justify-between text-lg">
            <span>Premium Bookings:</span>
            <span class="font-black text-purple-400">124</span>
          </div>
          <div class="w-full bg-black/50 rounded-full h-3 mt-4">
            <div class="bg-gradient-to-r from-emerald-500 to-teal-600 h-3 rounded-full" style="width: 78%"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- DESTINATION DASHBOARD (Hidden Initially) -->
    <div id="destinationDashboard" class="hidden">
      <div class="glass rounded-3xl p-8 mb-12 shadow-2xl">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-4xl font-black bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text flex items-center gap-4">
            üó∫Ô∏è Route Planner
          </h2>
          <button onclick="hideDestinationDashboard()" class="text-2xl hover:scale-110 transition-all">‚úï</button>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- Route Inputs -->
          <div class="space-y-6">
            <div>
              <label class="block text-xl font-bold text-white/90 mb-4">üìç Starting Point</label>
              <input id="originInput" type="text" placeholder="Current location..." class="w-full p-6 bg-black/50 border-2 border-white/30 rounded-3xl text-2xl font-bold text-white focus:outline-none focus:ring-4 focus:ring-blue-500 pac-target-input shadow-xl">
            </div>
            <div>
              <label class="block text-xl font-bold text-white/90 mb-4">üìç Destination</label>
              <input id="destinationInput" type="text" placeholder="Where to go..." class="w-full p-6 bg-black/50 border-2 border-white/30 rounded-3xl text-2xl font-bold text-white focus:outline-none focus:ring-4 focus:ring-blue-500 pac-target-input shadow-xl">
            </div>
            
            <div class="grid grid-cols-2 gap-6">
              <select class="p-6 bg-black/50 border-2 border-white/30 rounded-3xl text-xl font-bold text-white focus:outline-none">
                <option>üöó Fast Lane (Premium)</option>
                <option>üöô Mid Lane</option>
                <option>üöö Slow Lane</option>
              </select>
              <button onclick="findRoute()" class="bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-black py-6 px-8 rounded-3xl shadow-2xl hover:shadow-3xl hover:-translate-y-2 transition-all text-xl">
                üß† Find Best Route
              </button>
            </div>
          </div>
          
          <!-- Route Preview -->
          <div class="glass p-8 rounded-3xl border-2 border-blue-400/30">
            <h3 class="text-2xl font-bold text-blue-400 mb-6">üìã Route Summary</h3>
            <div id="routePreview" class="space-y-4 text-center">
              <div class="text-4xl font-black text-emerald-400" id="previewDistance">-</div>
              <div class="text-3xl font-bold text-white" id="previewDuration">-</div>
              <div class="text-xl text-blue-300" id="previewTraffic">No route selected</div>
              <div class="text-2xl font-bold text-emerald-400 mt-6" id="previewToll">‚Çπ0</div>
              <button id="bookRouteBtn" onclick="bookRoute()" disabled class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-black py-4 px-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all opacity-50">
                Book Route
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let map, directionsService, directionsRenderer, currentUser = null, ownerData = {};
    let originAutocomplete, destinationAutocomplete;
    
    // EXTENDED RTO DATABASE [web:213]
    const rtoVehicles = {
      'MH04AB1234': {owner: 'Rahul Sharma', model: 'Maruti Swift ZXi', fuel: 'Petrol', rto: 'MH-04 Mumbai'},
      'DL8CA5678': {owner: 'Priya Singh', model: 'Hyundai Creta SX', fuel: 'Diesel', rto: 'DL-8C Delhi'},
      'KA01EF9012': {owner: 'Amit Patel', model: 'Tata Nexon XZ+', fuel: 'Petrol', rto: 'KA-01 Bangalore'},
      'GJ02GH3456': {owner: 'Neha Gupta', model: 'Mahindra Thar LX', fuel: 'Diesel', rto: 'GJ-02 Ahmedabad'},
      'TN09JK7890': {owner: 'Vikram Reddy', model: 'Toyota Innova Crysta', fuel: 'Diesel', rto: 'TN-09 Chennai'}
    };

    // RTO VERIFICATION LOGIN
    function rtoLogin() {
      const regNum = document.getElementById('regNumber').value.toUpperCase().trim();
      const pin = document.getElementById('pin').value;
      
      document.getElementById('loginText').innerHTML = 'Verifying... üîÑ';
      
      setTimeout(() => {
        if (rtoVehicles[regNum] && pin === regNum.slice(-4)) {
          currentUser = regNum;
          ownerData = rtoVehicles[regNum];
          
          document.getElementById('vehicleDisplay').textContent = regNum;
          document.getElementById('ownerName').textContent = ownerData.owner;
          
          document.getElementById('loginScreen').style.opacity = '0';
          document.getElementById('loginScreen').style.transform = 'scale(0.9)';
          setTimeout(() => {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            initGoogleMap();
          }, 300);
        } else {
          document.getElementById('loginText').textContent = 'Invalid Details ‚ùå';
          setTimeout(() => {
            document.getElementById('loginText').textContent = 'üîê Verify Ownership';
          }, 2000);
        }
      }, 1500);
    }

    // GOOGLE MAPS WITH DIRECTIONS SERVICE
    function initGoogleMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 8,
        center: {lat: 28.6139, lng: 77.2090},
        mapTypeId: 'satellite',
        mapTypeControl: true,
        fullscreenControl: true,
        streetViewControl: false,
        zoomControl: true,
        styles: [
          {
            featureType: 'road.highway',
            elementType: 'geometry',
            stylers: [{color: '#ff6b35'}]
          }
        ]
      });

      directionsService = new google.maps.DirectionsService();
      directionsRenderer = new google.maps.DirectionsRenderer({
        map: map,
        suppressMarkers: false,
        polylineOptions: {
          strokeColor: '#10B981',
          strokeWeight: 10,
          strokeOpacity: 0.9
        }
      });

      // PLACES AUTOCOMPLETE FOR DESTINATION DASHBOARD
      originAutocomplete = new google.maps.places.Autocomplete(
        document.getElementById('originInput'), {
          types: ['(cities)'],
          componentRestrictions: {country: 'in'}
        }
      );
      
      destinationAutocomplete = new google.maps.places.Autocomplete(
        document.getElementById('destinationInput'), {
          types: ['(cities)'],
          componentRestrictions: {country: 'in'}
        }
      );
    }

    // SHOW DESTINATION DASHBOARD
    function showDestinationDashboard() {
      document.getElementById('liveDashboard').classList.add('hidden');
      document.getElementById('destinationDashboard').classList.remove('hidden');
      document.getElementById('originInput').focus();
    }

    function hideDestinationDashboard() {
      document.getElementById('destinationDashboard').classList.add('hidden');
      document.getElementById('liveDashboard').classList.remove('hidden');
      clearRoute();
    }

    // PERFECT GOOGLE DIRECTIONS ROUTING
    function findRoute() {
      const origin = document.getElementById('originInput').value;
      const destination = document.getElementById('destinationInput').value;
      
      if (!origin || !destination) {
        alert('Please enter both origin and destination');
        return;
      }

      const request = {
        origin: origin,
        destination: destination,
        travelMode: google.maps.TravelMode.DRIVING,
        drivingOptions: {
          departureTime: new Date(Date.now() + 30 * 60 * 1000), // 30 min from now
          trafficModel: google.maps.TrafficModel.BEST_GUESS
        },
        provideRouteAlternatives: true
      };

      directionsService.route(request, (result, status) => {
        if (status === 'OK') {
          directionsRenderer.setDirections(result);
          
          const route = result.routes[0].legs[0];
          document.getElementById('previewDistance').textContent = Math.round(route.distance.value / 1000) + ' km';
          document.getElementById('previewDuration').textContent = Math.round(route.duration.value / 60) + ' min';
          document.getElementById('previewTraffic').textContent = 'Live Traffic ETA';
          document.getElementById('previewToll').textContent = '‚Çπ' + Math.round((route.distance.value / 1000) * 1.2);
          document.getElementById('bookRouteBtn').disabled = false;
          document.getElementById('bookRouteBtn').classList.remove('opacity-50');
          
        } else {
          alert('Route not found. Please check addresses.');
          console.error('Directions request failed:', status);
        }
      });
    }

    function clearRoute() {
      if (directionsRenderer) {
        directionsRenderer.setDirections({routes: []});
      }
      document.getElementById('bookRouteBtn').disabled = true;
      document.getElementById('bookRouteBtn').classList.add('opacity-50');
    }

    function bookRoute() {
      document.getElementById('previewDistance').innerHTML = '<span class="text-4xl">‚úÖ</span> Route Booked!';
      document.getElementById('previewToll').innerHTML = 'Payment Success';
      document.getElementById('bookRouteBtn').innerHTML = 'üéâ Booked Successfully';
      document.getElementById('bookRouteBtn').classList.add('bg-emerald-600');
    }

    function logout() {
      document.getElementById('mainApp').classList.add('hidden');
      document.getElementById('loginScreen').classList.remove('hidden');
      document.getElementById('regNumber').value = '';
      document.getElementById('pin').value = '';
      clearRoute();
      hideDestinationDashboard();
    }

    // LIVE UPDATES
    setInterval(() => {
      document.getElementById('liveVehicles').textContent = (25000 + Math.random() * 15000).toFixed(0);
      document.getElementById('totalVehicles').textContent = (25000 + Math.random() * 15000).toFixed(0);
    }, 3000);

    // KEYBOARD SUPPORT
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        if (!document.getElementById('mainApp').classList.contains('hidden')) {
          rtoLogin();
        } else if (document.getElementById('destinationDashboard').classList.contains('hidden')) {
          showDestinationDashboard();
        }
      }
    });
  </script>
</body>
</html>
