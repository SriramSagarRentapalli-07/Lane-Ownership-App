<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lane Ownership Pro - GPS + 3D Vehicles + Routes</title>
    
    <!-- Leaflet + Google Maps -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBEbLeeT2G2czmJ5JMTckUj6qZJ3oqXg7k&libraries=places"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        *{font-family:'Inter',sans-serif;}
        .hud-font{font-family:'Orbitron',monospace;}
        
        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%),
                        url('https://images.unsplash.com/photo-1588137488142-b52cc277f4f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=3000&q=85') center/cover fixed;
            min-height: 100vh;
            color: white;
        }
        
        .glass{backdrop-filter:blur(30px);background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);box-shadow:0 25px 50px rgba(0,0,0,0.5);}
        .gradient-text{background:linear-gradient(135deg,#10B981 0%,#34D399 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        #map{height:500px;border-radius:20px;box-shadow:0 25px 50px rgba(0,0,0,0.6);}
        
        /* 3D VEHICLE MODELS */
        .car-3d{width:50px;height:25px;background:linear-gradient(45deg,#10B981,#34D399);border-radius:25px 25px 8px 8px;position:relative;box-shadow:0 8px 25px rgba(16,185,129,0.6);border:2px solid rgba(255,255,255,0.6);}
        .car-3d.swift{background:linear-gradient(45deg,#10B981,#059669);}
        .car-3d.creta{background:linear-gradient(45deg,#3B82F6,#1D4ED8);}
        .car-3d.nexon{background:linear-gradient(45deg,#F59E0B,#D97706);}
        .car-3d::before{content:'';position:absolute;top:6px;left:12px;width:12px;height:12px;background:rgba(255,255,255,0.9);border-radius:50%;box-shadow:inset 0 1px 2px rgba(0,0,0,0.3);}
        .car-3d::after{content:'';position:absolute;bottom:1px;left:8px;width:10px;height:10px;background:#6366F1;border-radius:50%;box-shadow:25px 0 0 0 #6366F1;}
        
        /* ROUTE ANIMATIONS */
        .traffic-car{width:20px;height:20px;background:#FF6B35;border-radius:50%;position:absolute;animation:moveCar 3s linear infinite;}
        @keyframes moveCar{0%{left:-20px;}100%{left:100%;}}
        
        select {color:#ffffff !important;background:rgba(0,0,0,0.3) !important;}
        select option {color:#000000 !important;background:#ffffff !important;}
        .fade-in{animation:fadeIn 0.8s ease-out;}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    </style>
</head>
<body class="p-6 pt-20">
    
  <!-- GPS + LOGIN SCREEN -->
  <div id="loginScreen" class="fixed inset-0 flex items-center justify-center z-50 bg-black/70 backdrop-blur-sm fade-in">
    <div class="glass rounded-3xl p-12 w-full max-w-md mx-6 shadow-2xl">
      <div class="text-center mb-8">
        <h1 class="text-4xl font-black gradient-text mb-4 hud-font">Lane Ownership</h1>
        <p class="text-white/70">GPS Location + Vehicle Login</p>
      </div>
      
      <!-- GPS STATUS -->
      <div id="gpsStatus" class="p-6 rounded-2xl bg-white/10 mb-6 text-center">
        <div class="text-3xl mb-2" id="gpsIcon">üìç</div>
        <div class="text-lg font-semibold" id="gpsText">Enable GPS Location</div>
        <div class="text-sm text-white/60 mt-2" id="gpsCoords">-</div>
      </div>
      
      <div class="grid grid-cols-3 gap-3 mb-6">
        <button onclick="enableGPS()" class="glass p-4 rounded-2xl hover:bg-white/20 transition-all font-semibold flex flex-col items-center">
          <span class="text-2xl">üîì</span> Real GPS
        </button>
        <button onclick="useDelhiDemo()" class="glass p-4 rounded-2xl hover:bg-white/20 transition-all font-semibold flex flex-col items-center">
          <span class="text-2xl">üèõÔ∏è</span> Delhi
        </button>
        <button onclick="useMumbaiDemo()" class="glass p-4 rounded-2xl hover:bg-white/20 transition-all font-semibold flex flex-col items-center">
          <span class="text-2xl">üèôÔ∏è</span> Mumbai
        </button>
      </div>
      
      <!-- VEHICLE LOGIN -->
      <input id="vehicleReg" type="text" placeholder="MH04AB1234" maxlength="13" class="w-full p-4 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-500 mb-4 text-lg font-bold uppercase">
      <div class="grid grid-cols-2 gap-4 mb-6">
        <select id="carBrand" onchange="loadModels()" class="p-4 bg-white/10 border border-white/20 rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="">Brand</option>
          <option value="swift">Maruti Swift</option>
          <option value="creta">Hyundai Creta</option>
          <option value="nexon">Tata Nexon</option>
        </select>
        <select id="carModel" disabled class="p-4 bg-white/10 border border-white/20 rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="">Model</option>
        </select>
      </div>
      
      <button onclick="verifyAndProceed()" class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-bold py-4 px-6 rounded-2xl shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all text-lg">
        üöó Start Navigation
      </button>
    </div>
  </div>

  <!-- MAIN DASHBOARD -->
  <div id="mainApp" class="hidden min-h-screen">
    <!-- Header -->
    <div class="glass rounded-3xl p-6 mb-8 shadow-2xl flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 max-w-6xl mx-auto">
      <div class="flex items-center">
        <div class="w-14 h-14 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
          <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/></svg>
        </div>
        <div>
          <h1 class="text-3xl lg:text-4xl font-black gradient-text hud-font">Lane Ownership Pro</h1>
          <p class="text-white/70" id="vehicleInfo">GPS Tracking Active</p>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row gap-4">
        <div class="text-right bg-white/10 p-4 rounded-2xl">
          <div class="text-3xl font-black text-emerald-400" id="liveVehicles">12,847</div>
          <div class="text-sm text-white/60">Live Vehicles</div>
        </div>
        <button onclick="logout()" class="glass px-6 py-3 rounded-xl text-sm font-semibold hover:bg-white/20 transition-all">Logout</button>
      </div>
    </div>

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 px-6">
      <!-- LIVE TRACKING MAP WITH 3D VEHICLE + ROUTES -->
      <div class="glass rounded-3xl p-8 shadow-2xl fade-in order-2 lg:order-1">
        <h2 class="text-2xl font-bold mb-6 flex items-center gradient-text"><span class="mr-2">üõ∞Ô∏è</span>Live GPS Tracking + Routes</h2>
        <div id="map"></div>
        
        <!-- MAP CONTROLS -->
        <div class="flex gap-2 mt-4 text-xs">
          <button onclick="centerOnVehicle()" class="flex-1 p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all font-medium">üìç Center Vehicle</button>
          <button onclick="clearRoute()" class="flex-1 p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all font-medium">üóëÔ∏è Clear Route</button>
        </div>
      </div>

      <!-- ROUTE PLANNER + HIGHWAY BOOKING -->
      <div class="glass rounded-3xl p-8 shadow-2xl fade-in order-1 lg:order-2">
        <h2 class="text-2xl font-bold mb-8 flex items-center gradient-text">üß≠ Route Planner</h2>
        
        <div class="space-y-6">
          <!-- CURRENT LOCATION -->
          <div>
            <label class="block text-sm font-semibold text-white/90 mb-3">üìç Current GPS</label>
            <div class="p-6 bg-black/40 border border-white/20 rounded-2xl text-center text-lg font-bold text-emerald-400" id="currentLocation">
              Detecting...
            </div>
          </div>
          
          <!-- DESTINATION -->
          <div>
            <label class="block text-sm font-semibold text-white/90 mb-3">üéØ Destination</label>
            <input id="destination" type="text" placeholder="Mumbai, Delhi, Bangalore..." class="w-full p-5 bg-black/30 border-2 border-white/30 rounded-2xl text-lg font-bold text-white focus:outline-none focus:ring-4 focus:ring-emerald-500/50 pac-target-input">
          </div>
          
          <!-- NATIONAL HIGHWAYS -->
          <div>
            <label class="block text-sm font-semibold text-white/90 mb-3">üõ£Ô∏è Highway Selection</label>
            <select id="highwaySelect" class="w-full p-5 bg-black/30 border-2 border-white/30 rounded-2xl text-xl font-bold text-white">
              <option value="NH-48">üõ£Ô∏è NH-48 Delhi-Mumbai (2,806 km)</option>
              <option value="NH-44">üõ£Ô∏è NH-44 Srinagar-Kanyakumari (3,745 km)</option>
              <option value="NH-19">üõ£Ô∏è NH-19 Delhi-Kolkata (1,451 km)</option>
            </select>
          </div>
          
          <!-- BOOKING CONTROLS -->
          <div class="grid grid-cols-2 gap-4 mb-6">
            <div class="p-4 bg-black/40 border border-white/20 rounded-2xl text-center">
              <div class="text-2xl font-black text-emerald-400" id="routeDistance">1,247 km</div>
              <div class="text-xs text-white/70">Distance</div>
            </div>
            <div class="p-4 bg-black/40 border border-white/20 rounded-2xl text-center">
              <div class="text-2xl font-black text-blue-400" id="routeTime">18h 32m</div>
              <div class="text-xs text-white/70">ETA</div>
            </div>
          </div>
          
          <button onclick="planRoute()" class="w-full bg-gradient-to-r from-emerald-500 via-green-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-black py-6 px-8 rounded-3xl shadow-2xl hover:shadow-3xl transform hover:-translate-y-2 transition-all duration-500 text-xl">
            üß† Calculate Premium Route
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // GLOBAL STATE
    let map, userMarker, routeLayer, currentVehicle = null, userLat = 28.6139, userLng = 77.2090;
    let gpsTracking = false, trackingInterval;
    
    // COMPLETE VEHICLE DATABASE
    const vehicleDB = {
      'MH04AB1234': {brand: 'swift', model: 'Maruti Swift ZXi', owner: 'Rahul Sharma'},
      'DL8CA5678': {brand: 'creta', model: 'Hyundai Creta SX', owner: 'Priya Singh'},
      'KA01EF9012': {brand: 'nexon', model: 'Tata Nexon XZ+', owner: 'Amit Patel'}
    };
    
    const carModels = {
      swift: ['Swift ZXi', 'Swift VXi', 'Swift LXi'],
      creta: ['Creta SX', 'Creta SX(O)', 'Creta EX'],
      nexon: ['Nexon XZ+', 'Nexon XZA+', 'Nexon XT']
    };

    // INITIALIZE PREMIUM MAP
    function initMap() {
      map = L.map('map').setView([userLat, userLng], 16);
      
      // High-res Satellite + Traffic Overlay
      L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '¬© Esri ¬∑ Maxar ¬∑ NHAI',
        maxZoom: 20
      }).addTo(map);

      // 3D USER VEHICLE MARKER
      userMarker = L.marker([userLat, userLng], {
        icon: L.divIcon({
          html: '<div class="car-3d"></div>',
          iconSize: [50, 25],
          iconAnchor: [25, 25],
          className: ''
        })
      }).addTo(map);
      
      // Google Places Autocomplete
      new google.maps.places.Autocomplete(document.getElementById('destination'), {
        types: ['(cities)'],
        componentRestrictions: {country: 'in'}
      });
    }

    // GPS TRACKING [web:329][web:340]
    function enableGPS() {
      document.getElementById('gpsIcon').textContent = '‚è≥';
      document.getElementById('gpsText').textContent = 'Detecting GPS...';
      
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          position => {
            userLat = position.coords.latitude;
            userLng = position.coords.longitude;
            updateGPSDisplay();
            gpsTracking = true;
            startTracking();
            document.getElementById('gpsIcon').textContent = '‚úÖ';
            document.getElementById('gpsText').textContent = 'GPS Active';
          },
          () => {
            document.getElementById('gpsIcon').textContent = '‚ö†Ô∏è';
            document.getElementById('gpsText').textContent = 'GPS Denied - Demo Mode';
            useDelhiDemo();
          },
          {enableHighAccuracy: true, timeout: 10000, maximumAge: 30000}
        );
      }
    }

    function useDelhiDemo() {
      userLat = 28.6139; userLng = 77.2090;
      updateGPSDisplay();
      document.getElementById('gpsText').textContent = 'Delhi Demo';
    }

    function useMumbaiDemo() {
      userLat = 19.0760; userLng = 72.8774;
      updateGPSDisplay();
      document.getElementById('gpsText').textContent = 'Mumbai Demo';
    }

    function updateGPSDisplay() {
      document.getElementById('gpsCoords').textContent = `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;
      if (map) {
        map.setView([userLat, userLng], 18);
        userMarker.setLatLng([userLat, userLng]);
      }
    }

    // CONTINUOUS GPS TRACKING
    function startTracking() {
      clearInterval(trackingInterval);
      trackingInterval = setInterval(() => {
        if (gpsTracking && navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            position => {
              userLat = position.coords.latitude;
              userLng = position.coords.longitude;
              updateGPSDisplay();
            },
            null,
            {enableHighAccuracy: true, timeout: 5000}
          );
        }
      }, 4000);
    }

    // VEHICLE SELECTION
    function loadModels() {
      const brand = document.getElementById('carBrand').value;
      const modelSelect = document.getElementById('carModel');
      modelSelect.disabled = !brand;
      modelSelect.innerHTML = '<option value="">Select Model</option>';
      
      if (brand && carModels[brand]) {
        carModels[brand].forEach(model => {
          modelSelect.innerHTML += `<option value="${model}">${model}</option>`;
        });
      }
    }

    function verifyAndProceed() {
      const regNum = document.getElementById('vehicleReg').value.toUpperCase().trim();
      const brand = document.getElementById('carBrand').value;
      
      if (vehicleDB[regNum] && brand) {
        currentVehicle = vehicleDB[regNum];
        currentVehicle.brand = brand;
        
        // Update 3D car model
        const carElement = document.querySelector('.car-3d');
        carElement.className = `car-3d ${brand}`;
        
        // Show dashboard
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('mainApp').classList.remove('hidden');
        document.getElementById('vehicleInfo').textContent = `${currentVehicle.model} ‚Ä¢ ${currentVehicle.owner}`;
        
        if (!map) initMap();
        updateGPSDisplay();
      } else {
        alert('Demo: MH04AB1234 + Select Brand');
      }
    }

    // GOOGLE-STYLE ROUTING [web:326]
    function planRoute() {
      const destination = document.getElementById('destination').value;
      if (!destination || !currentVehicle) {
        alert('Enter destination & verify vehicle first');
        return;
      }
      
      // Clear previous route
      if (routeLayer) map.removeLayer(routeLayer);
      
      // Simulate Google Directions API response
      const highway = document.getElementById('highwaySelect').value;
      const destCoords = {
        'NH-48': [19.0760, 72.8774], // Mumbai
        'NH-44': [8.5241, 76.9367],  // Kanyakumari
        'NH-19': [22.5726, 88.3639]  // Kolkata
      }[highway] || [19.0760, 72.8774];
      
      // Perfect route polyline (Google Maps style)
      const routePoints = [
        [userLat, userLng],
        [userLat - 0.1, userLng + 0.05],
        [userLat - 0.3, userLng + 0.15],
        destCoords
      ];
      
      routeLayer = L.polyline(routePoints, {
        color: currentVehicle.brand === 'swift' ? '#10B981' : 
               currentVehicle.brand === 'creta' ? '#3B82F6' : '#F59E0B',
        weight: 12,
        opacity: 0.9,
        smoothFactor: 1
      }).addTo(map);
      
      // Traffic simulation cars
      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          const trafficCar = L.circleMarker(routePoints[Math.floor(Math.random() * routePoints.length)], {
            radius: 6,
            fillColor: '#FF6B35',
            color: '#FFF',
            weight: 2,
            fillOpacity: 0.8
          }).addTo(map);
          
          setTimeout(() => map.removeLayer(trafficCar), 5000);
        }, i * 1000);
      }
      
      map.fitBounds(routeLayer.getBounds());
      
      // Update stats
      document.getElementById('routeDistance').textContent = '1,247 km';
      document.getElementById('routeTime').textContent = '18h 32m';
    }

    function centerOnVehicle() {
      if (userMarker) {
        map.setView(userMarker.getLatLng(), 18);
      }
    }

    function clearRoute() {
      if (routeLayer) {
        map.removeLayer(routeLayer);
        routeLayer = null;
      }
    }

    function logout() {
      document.getElementById('mainApp').classList.add('hidden');
      document.getElementById('loginScreen').classList.remove('hidden');
      clearInterval(trackingInterval);
    }

    // Live Updates
    setInterval(() => {
      document.getElementById('liveVehicles').textContent = (12000 + Math.floor(Math.random() * 5000)).toLocaleString();
    }, 3000);

    // Enter key login
    document.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        const gpsActive = document.getElementById('gpsIcon').textContent === '‚úÖ';
        if (gpsActive) verifyAndProceed();
        else enableGPS();
      }
    });
  </script>
</body>
</html>
