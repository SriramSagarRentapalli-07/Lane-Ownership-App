<!DOCTYPE html>
<html>
<head>
  <title>Lane Ownership - Full Route Mapping</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    *{font-family:'Inter',sans-serif;}
    .glass{backdrop-filter:blur(30px);background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);}
    .gradient-bg{background:linear-gradient(135deg,#0f0f23 0%,#1a1a2e 50%,#16213e 100%);}
    #map{height:600px;border-radius:20px;box-shadow:0 25px 50px rgba(0,0,0,0.5);}
    select { color: #ffffff !important; background: rgba(0,0,0,0.4) !important; }
    select option { color: #000000 !important; background: #ffffff !important; }
    select option:checked { color: #ffffff !important; background: #3b82f6 !important; }
    .fade-in{animation:fadeIn 0.8s ease-out;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    .route-line{filter: drop-shadow(0 0 10px currentColor);}
  </style>
</head>
<body class="gradient-bg text-white min-h-screen">
  <!-- Login Screen -->
  <div id="loginScreen" class="fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm fade-in">
    <div class="glass rounded-3xl p-12 w-full max-w-md mx-6 shadow-2xl">
      <h1 class="text-4xl font-black bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent text-center mb-4">Lane Ownership</h1>
      <p class="text-center text-white/60 mb-8">Full Route Highway Booking</p>
      <input id="username" type="text" placeholder="Vehicle No / DL" class="w-full p-4 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4">
      <input id="password" type="password" placeholder="PIN" class="w-full p-4 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6">
      <button onclick="login()" class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-bold py-4 px-6 rounded-2xl shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all">üöó View Routes</button>
      <div class="text-center text-xs text-white/40 mt-4">Demo: DL1234 / 1234</div>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div id="mainApp" class="hidden min-h-screen p-6 pt-20">
    <!-- Header -->
    <div class="glass rounded-3xl p-6 mb-8 shadow-2xl flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
      <div class="flex items-center">
        <div class="w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
          <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/></svg>
        </div>
        <div>
          <h1 class="text-3xl lg:text-4xl font-black text-white">National Highways India</h1>
          <p class="text-white/60" id="userWelcome">Full Route Visualization</p>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
        <div class="text-right bg-white/10 p-4 rounded-2xl">
          <div class="text-3xl font-black text-green-400" id="totalFlow">12,847</div>
          <div class="text-sm text-white/60">Live Vehicles</div>
        </div>
        <button onclick="logout()" class="glass px-6 py-3 rounded-xl text-sm font-semibold hover:bg-white/20 transition-all">Logout</button>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
      <!-- ENHANCED SATELLITE MAP WITH FULL ROUTES -->
      <div class="glass rounded-3xl p-8 shadow-2xl fade-in order-2 lg:order-1 lg:col-span-2">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
          <h2 class="text-2xl font-bold flex items-center">üõ∞Ô∏è Live Satellite Routes</h2>
          <div class="flex gap-2 text-sm">
            <button onclick="setMapType('satellite')" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-all font-medium">üõ∞Ô∏è Satellite</button>
            <button onclick="setMapType('roadmap')" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-all font-medium">üõ£Ô∏è Roads</button>
          </div>
        </div>
        <div id="map" class="w-full"></div>
      </div>

      <!-- Highway Booking -->
      <div class="glass rounded-3xl p-8 shadow-2xl fade-in">
        <h2 class="text-2xl font-bold mb-8 flex items-center">üìç Book Full Route</h2>
        <div class="space-y-6">
          <!-- ROUTE-SPECIFIC BOOKING -->
          <div>
            <label class="block text-sm font-semibold text-white/90 mb-3">Select Highway Route</label>
            <select id="highwaySelect" onchange="showRoute()" class="w-full p-5 bg-black/40 border-2 border-white/30 rounded-2xl text-xl font-bold text-white focus:outline-none focus:ring-4 focus:ring-emerald-500/50 cursor-pointer">
              <option value="NH-48">üõ£Ô∏è NH-48 Delhi ‚Üí Mumbai (2,806 km)</option>
              <option value="NH-44">üõ£Ô∏è NH-44 Srinagar ‚Üí Kanyakumari (3,745 km)</option>
              <option value="NH-19">üõ£Ô∏è NH-19 Delhi ‚Üí Kolkata (1,451 km)</option>
              <option value="NH-27">üõ£Ô∏è NH-27 Porbandar ‚Üí Silchar (3,507 km)</option>
              <option value="NH-16">üõ£Ô∏è NH-16 Chennai ‚Üí Kolkata (1,711 km)</option>
            </select>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <select id="vehicleType" class="p-5 bg-black/40 border-2 border-white/30 rounded-2xl text-lg font-semibold text-white">
              <option>üöó Car</option><option>üöö Truck</option><option>üèçÔ∏è Bike</option><option>üöå Bus</option>
            </select>
            <input id="duration" type="number" placeholder="Duration hrs" value="24" class="p-5 bg-black/40 border-2 border-white/30 rounded-2xl text-lg font-semibold text-white">
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div class="p-4 bg-black/50 border border-emerald-500/30 rounded-2xl text-center">
              <div class="text-2xl font-black text-emerald-400" id="cost">‚Çπ2,450</div>
              <div class="text-white/80">Route Toll</div>
            </div>
            <div class="p-4 bg-black/50 border border-blue-500/30 rounded-2xl text-center">
              <div class="text-2xl font-black text-blue-400" id="distance">2,806 km</div>
              <div class="text-white/80">Route Length</div>
            </div>
          </div>
          
          <button onclick="bookLane()" class="w-full bg-gradient-to-r from-emerald-500 via-green-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-black py-6 px-8 rounded-3xl shadow-2xl hover:shadow-3xl transform hover:-translate-y-2 transition-all text-xl">
            üöÄ Book Complete Route
          </button>
          
          <div id="bookingStatus" class="text-center p-8 rounded-3xl bg-emerald-500/20 border-2 border-emerald-400/50 hidden">
            <div class="text-4xl font-black text-emerald-400 mb-4">‚úÖ ROUTE SECURED!</div>
            <div class="text-3xl font-bold mb-4" id="assignedLane">NH-48 Full Route</div>
            <div class="text-xl text-emerald-300">All Lanes Reserved | 24hr Validity</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Route Stats -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="glass rounded-2xl p-6 shadow-2xl">
        <h3 class="font-bold text-lg mb-4">üáÆüá≥ National Coverage</h3>
        <div class="space-y-3 text-sm">
          <div class="flex justify-between"><span>Total Length</span><span class="font-bold text-green-400">150,000 km</span></div>
          <div class="flex justify-between"><span>Toll Plazas</span><span class="font-bold text-blue-400">2,500+</span></div>
          <div class="flex justify-between"><span>Daily Traffic</span><span class="font-bold text-purple-400">12M vehicles</span></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let currentUser = null, map = null, currentRouteLayer = null;
    
    // COMPLETE HIGHWAY ROUTES WITH REAL COORDINATES [web:152]
    const highwayRoutes = {
      'NH-48': {
        name: 'Delhi-Mumbai', length: 2806,
        route: [
          [28.6139,77.2090], [28.4595,77.0266], [27.0238,74.2189], [26.9155,75.8189],
          [24.5854,73.7125], [22.3039,70.8022], [21.1702,72.8311], [19.0760,72.8774],
          [18.5204,73.8567], [13.0827,80.2707] // Delhi to Mumbai to Chennai points
        ],
        color: '#FF6B35'
      },
      'NH-44': {
        name: 'Srinagar-Kanyakumari', length: 3745,
        route: [
          [34.0837,74.7973], [33.7788,76.5762], [30.7333,76.7794], [28.6139,77.2090],
          [17.3850,78.4867], [12.9716,77.5946], [8.5241,76.9366]
        ],
        color: '#F7931E'
      },
      'NH-19': {
        name: 'Delhi-Kolkata', length: 1451,
        route: [[28.6139,77.2090], [26.9124,75.7873], [23.3441,85.3096], [22.5726,88.3639]],
        color: '#4ECDC4'
      },
      'NH-27': {
        name: 'Porbandar-Silchar', length: 3507,
        route: [[21.6422,69.6092], [23.0225,72.5714], [26.9124,75.7873], [24.6646,93.9063]],
        color: '#45B7D1'
      },
      'NH-16': {
        name: 'Chennai-Kolkata', length: 1711,
        route: [[13.0827,80.2707], [16.5064,80.6480], [22.5726,88.3639]],
        color: '#96CEB4'
      }
    };

    // FIXED LOGIN
    function login() {
      if (document.getElementById('username').value === 'DL1234' && document.getElementById('password').value === '1234') {
        currentUser = 'DL1234';
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('mainApp').classList.remove('hidden');
        document.getElementById('userWelcome').textContent = `Welcome Driver DL1234`;
        setTimeout(initMap, 500);
      } else {
        alert('Demo: DL1234 / 1234');
      }
    }

    // ENHANCED ROUTE MAP
    function initMap() {
      map = L.map('map').setView([28.6139, 77.2090], 6);
      
      // Satellite base layer
      L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '¬© Esri ¬∑ Maxar ¬∑ NHAI',
        maxZoom: 19
      }).addTo(map);

      // Show default NH-48 full route
      showRoute();
    }

    // SHOW COMPLETE ROUTE ON SELECT
    function showRoute() {
      const highway = document.getElementById('highwaySelect').value;
      const routeData = highwayRoutes[highway];
      
      // Clear previous route
      if (currentRouteLayer) map.removeLayer(currentRouteLayer);
      
      // Draw full route polyline
      currentRouteLayer = L.layerGroup().addTo(map);
      
      // Main route line (thick, glowing)
      L.polyline(routeData.route, {
        color: routeData.color,
        weight: 8,
        opacity: 0.9,
        smoothFactor: 1
      }).addTo(currentRouteLayer).bindPopup(`
        <div class="p-4">
          <h3 class="font-bold text-xl text-${routeData.color === '#FF6B35' ? 'orange' : routeData.color === '#F7931E' ? 'yellow' : 'blue'}-500 mb-2">${highway}</h3>
          <p><strong>${routeData.name}</strong></p>
          <p><strong>${routeData.length} km</strong></p>
        </div>
      `);
      
      // Route direction arrows
      for (let i = 1; i < routeData.route.length; i += 2) {
        L.marker(routeData.route[i], {
          icon: L.divIcon({
            html: `<div style="background:${routeData.color};width:24px;height:24px;border-radius:50%;border:3px solid white;animation: pulse 2s infinite;"></div>`,
            iconSize: [24, 24],
            className: 'route-arrow'
          })
        }).addTo(currentRouteLayer);
      }
      
      // Fly to route
      map.fitBounds(L.latLngBounds(routeData.route), {padding: [50, 50]});
      
      // Update booking info
      document.getElementById('distance').textContent = `${routeData.length} km`;
      document.getElementById('cost').textContent = `‚Çπ${Math.round(routeData.length * 0.9)}`;
    }

    // Map Types
    function setMapType(type) {
      if (type === 'satellite') {
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}').addTo(map);
      } else {
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
      }
    }

    // Booking with route confirmation
    function bookLane() {
      const highway = document.getElementById('highwaySelect').value;
      document.getElementById('assignedLane').textContent = `${highway} Complete Route`;
      document.getElementById('bookingStatus').classList.remove('hidden');
      
      // Animate route highlight
      if (currentRouteLayer) {
        currentRouteLayer.setStyle({weight: 12, opacity: 1});
        setTimeout(() => {
          currentRouteLayer.setStyle({weight: 8, opacity: 0.9});
        }, 3000);
      }
    }

    function logout() {
      document.getElementById('mainApp').classList.add('hidden');
      document.getElementById('loginScreen').classList.remove('hidden');
    }

    // Live stats
    setInterval(() => {
      document.getElementById('totalFlow').textContent = (8000 + Math.random()*8000).toFixed(0);
    }, 3000);

    document.addEventListener('keydown', e => e.key === 'Enter' && login());
  </script>
</body>
</html>
