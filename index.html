
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lane Ownership Pro - Step-by-Step Navigation</title>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBEbLeeT2G2czmJ5JMTckUj6qZJ3oqXg7k&libraries=places"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .hud-font { font-family: 'Orbitron', monospace; }
        body {
            background: linear-gradient(135deg, #0a0a1f 0%, #1a1a3e 50%, #16213e 100%),
                        url('https://images.unsplash.com/photo-1588137488142-b52cc277f4f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=3000&q=85') center/cover fixed;
            min-height: 100vh;
            color: white;
        }
        .glass { 
            backdrop-filter: blur(40px); 
            background: rgba(255,255,255,0.1); 
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 32px 64px rgba(0,0,0,0.6);
        }
        .gradient-text {
            background: linear-gradient(135deg, #10B981 0%, #34D399 50%, #059669 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .neon-glow { 
            box-shadow: 0 0 40px rgba(16,185,129,0.5), inset 0 1px 0 rgba(255,255,255,0.3);
        }
        #map { height: 600px; border-radius: 24px; box-shadow: 0 32px 80px rgba(0,0,0,0.7); }
        .step-active { border: 4px solid #10B981; box-shadow: 0 0 30px rgba(16,185,129,0.6); }
        .pac-container { background: rgba(31,41,55,0.98) !important; color: white !important; border-radius: 16px !important; }
        .screen-hidden { display: none !important; }
    </style>
</head>
<body class="p-8 md:p-16">
    
    <!-- STEP INDICATOR -->
    <div class="glass rounded-3xl p-8 mb-12 max-w-4xl mx-auto">
        <div class="flex justify-between items-center text-center">
            <div class="flex-1 step-active">
                <div class="text-3xl font-black gradient-text mb-2 hud-font">1</div>
                <div class="text-lg font-bold text-white/90">GPS Location</div>
            </div>
            <div class="w-24 h-1 bg-gradient-to-r from-gray-600 to-transparent mx-6"></div>
            <div class="flex-1">
                <div class="text-3xl font-black text-white/50 mb-2 hud-font">2</div>
                <div class="text-lg font-bold text-white/50">Vehicle Login</div>
            </div>
            <div class="w-24 h-1 bg-gray-600 mx-6"></div>
            <div class="flex-1">
                <div class="text-3xl font-black text-white/50 mb-2 hud-font">3</div>
                <div class="text-lg font-bold text-white/50">Route Planning</div>
            </div>
            <div class="w-24 h-1 bg-gray-600 mx-6"></div>
            <div class="flex-1">
                <div class="text-3xl font-black text-white/50 mb-2 hud-font">4</div>
                <div class="text-lg font-bold text-white/50">Live Navigation</div>
            </div>
        </div>
    </div>

    <!-- STEP 1: GPS LOCATION -->
    <div id="step1" class="max-w-4xl mx-auto glass rounded-4xl p-16 mb-16 step-active neon-glow">
        <div class="text-center mb-20">
            <h1 class="text-6xl font-black gradient-text mb-8 hud-font">LOCATE YOUR POSITION</h1>
            <p class="text-2xl text-white/90 mb-12 max-w-2xl mx-auto">Enable GPS to detect your exact location on Indian National Highways</p>
            <div class="w-32 h-32 mx-auto bg-gradient-to-br from-emerald-500 to-teal-500 rounded-full flex items-center justify-center shadow-2xl mb-12 neon-glow">
                <svg class="w-20 h-20" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"/>
                </svg>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div class="space-y-8">
                <div id="locationStatus" class="text-center p-12 glass rounded-3xl">
                    <div class="text-4xl mb-4" id="gpsIcon">üìç</div>
                    <div class="text-3xl font-bold text-white/50 mb-4" id="gpsText">Click to Enable GPS</div>
                    <div class="text-xl text-white/60 mb-8" id="gpsCoords">-</div>
                    <button onclick="getCurrentLocation()" 
                            class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-black py-12 px-16 rounded-4xl shadow-2xl hover:shadow-4xl hover:-translate-y-3 transition-all text-2xl neon-glow">
                        üîì ENABLE LOCATION ACCESS
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-6">
                    <button onclick="useDelhiLocation()" class="glass p-8 rounded-3xl hover:bg-white/10 transition-all text-xl font-bold">üìç Delhi (Demo)</button>
                    <button onclick="useMumbaiLocation()" class="glass p-8 rounded-3xl hover:bg-white/10 transition-all text-xl font-bold">üìç Mumbai (Demo)</button>
                </div>
            </div>
            <div id="miniMap1" class="h-96 rounded-3xl shadow-2xl border-4 border-white/20"></div>
        </div>
    </div>

    <!-- STEP 2: VEHICLE LOGIN (Hidden) -->
    <div id="step2" class="max-w-4xl mx-auto glass rounded-4xl p-16 mb-16 screen-hidden neon-glow">
        <div class="text-center mb-20">
            <h1 class="text-6xl font-black gradient-text mb-8 hud-font">VEHICLE AUTHENTICATION</h1>
            <p class="text-2xl text-white/90 mb-12">Verify your vehicle registration for premium lane access</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
            <div class="space-y-8">
                <input id="regNumber" type="text" placeholder="MH04AB1234" maxlength="13" class="w-full p-10 bg-black/50 border-4 border-white/30 rounded-4xl text-4xl font-black uppercase">
                <div class="grid grid-cols-2 gap-8">
                    <select id="carBrand" onchange="loadCarModels()" class="p-10 bg-black/50 border-4 border-white/30 rounded-4xl text-3xl font-bold">
                        <option value="">Car Brand</option>
                        <option>Maruti Suzuki</option><option>Tata</option><option>Mahindra</option>
                        <option>Hyundai</option><option>Toyota</option><option>Honda</option>
                    </select>
                    <select id="carModel" disabled class="p-10 bg-black/50 border-4 border-white/30 rounded-4xl text-3xl font-bold">
                        <option>Model</option>
                    </select>
                </div>
                <button onclick="verifyVehicle()" class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-black py-14 px-20 rounded-4xl shadow-2xl hover:shadow-4xl hover:-translate-y-3 text-3xl neon-glow">
                    ‚úÖ VERIFY & PROCEED
                </button>
            </div>
            <div id="vehiclePreview" class="glass p-12 rounded-4xl hidden">
                <div class="text-6xl font-black gradient-text text-center mb-8" id="verifiedReg">-</div>
                <div class="text-3xl font-bold text-white text-center mb-4" id="verifiedOwner">-</div>
                <div class="text-2xl text-emerald-400 text-center font-bold" id="verifiedDetails">-</div>
            </div>
        </div>
    </div>

    <!-- STEP 3: DESTINATION INPUT (Hidden) -->
    <div id="step3" class="max-w-6xl mx-auto glass rounded-4xl p-16 mb-16 screen-hidden neon-glow">
        <div class="text-center mb-20">
            <h1 class="text-6xl font-black gradient-text mb-8 hud-font">ROUTE PLANNER</h1>
            <p class="text-2xl text-white/90 mb-12">Enter your destination for optimal lane recommendations</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <div class="space-y-12">
                <div>
                    <label class="block text-3xl font-black mb-8 gradient-text">üìç Current Location</label>
                    <div class="p-12 glass rounded-4xl text-4xl font-bold text-center text-emerald-400 mb-8" id="currentLocationText">Detecting...</div>
                    <button onclick="useCurrentLocation()" class="w-full glass p-12 rounded-4xl text-2xl font-bold hover:bg-white/20 transition-all">üîÑ REFRESH GPS</button>
                </div>
                <div>
                    <label class="block text-3xl font-black mb-8 gradient-text">üéØ Destination</label>
                    <input id="destination" type="text" placeholder="Type destination (Mumbai, Bangalore, etc.)" class="w-full p-12 bg-black/60 border-4 border-white/30 rounded-4xl text-4xl font-bold pac-target-input">
                </div>
                <div class="grid grid-cols-2 gap-8">
                    <select class="p-12 bg-black/60 border-4 border-white/30 rounded-4xl text-3xl font-bold">
                        <option>üöÄ Premium Fast Lane</option>
                        <option>‚ö° Express Lane</option>
                        <option>üöó Normal Lane</option>
                    </select>
                    <button onclick="planDynamicRoute()" class="bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-black py-12 px-16 rounded-4xl shadow-2xl hover:shadow-4xl hover:-translate-y-3 text-3xl neon-glow">
                        üß† CALCULATE ROUTE
                    </button>
                </div>
            </div>
            <div id="routeMap" class="h-[700px] rounded-4xl shadow-2xl border-4 border-white/20"></div>
        </div>
    </div>

    <!-- STEP 4: LIVE NAVIGATION (Hidden) -->
    <div id="step4" class="max-w-6xl mx-auto glass rounded-4xl p-16 mb-16 screen-hidden neon-glow">
        <div class="text-center mb-20">
            <h1 class="text-6xl font-black gradient-text mb-8 hud-font">LIVE NAVIGATION</h1>
            <p class="text-2xl text-white/90 mb-12">Premium Fast Lane Assigned - Follow Directions</p>
        </div>
        <div id="liveMap" class="h-[800px] rounded-4xl shadow-2xl border-4 border-emerald-400/50 mb-12"></div>
        <div class="grid grid-cols-4 gap-8 text-center">
            <div class="glass p-12 rounded-4xl">
                <div class="text-5xl font-black text-emerald-400 mb-4" id="liveDistance">1,386 km</div>
                <div class="text-2xl font-bold text-white">Remaining</div>
            </div>
            <div class="glass p-12 rounded-4xl">
                <div class="text-5xl font-black text-blue-400 mb-4" id="liveETA">17h 32m</div>
                <div class="text-2xl font-bold text-white">ETA</div>
            </div>
            <div class="glass p-12 rounded-4xl">
                <div class="text-5xl font-black text-orange-400 mb-4" id="liveSpeed">118 km/h</div>
                <div class="text-2xl font-bold text-white">Fast Lane</div>
            </div>
            <div class="glass p-12 rounded-4xl bg-emerald-500/20 border-emerald-400/50">
                <div class="text-5xl font-black text-emerald-300 mb-4">‚úÖ</div>
                <div class="text-2xl font-bold text-white">Lane Secured</div>
            </div>
        </div>
    </div>

    <script>
        // COMPLETE FLOW CONTROL
        let currentStep = 1;
        let userLocation = null;
        let map1, map2, map3, vehicleMarker;
        let currentVehicle = null;

        // INDIAN CAR DATABASE
        const carModels = {
            'Maruti Suzuki': ['Swift','Brezza','Baleno','Alto','WagonR','Dzire','Ertiga','Vitara Brezza'],
            'Tata': ['Nexon','Safari','Harrier','Punch','Tiago','Altroz'],
            'Mahindra': ['XUV700','Thar','Scorpio N','XUV300','Bolero'],
            'Hyundai': ['Creta','Venue','i20','Verna','i10'],
            'Toyota': ['Innova','Fortuner','Hyryder']
        };

        // RTO DATABASE
        const rtoData = {
            'MH04AB1234': {owner: 'Rahul Sharma', model: 'Maruti Swift ZXi', location: 'Mumbai'},
            'DL8CA5678': {owner: 'Priya Singh', model: 'Hyundai Creta SX', location: 'Delhi'},
            'KA01EF9012': {owner: 'Amit Patel', model: 'Tata Nexon XZ+', location: 'Bangalore'}
        };

        // STEP 1: GPS LOCATION [web:329][web:340]
        function getCurrentLocation() {
            document.getElementById('gpsIcon').textContent = '‚è≥';
            document.getElementById('gpsText').textContent = 'Detecting Location...';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    position => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        
                        document.getElementById('gpsIcon').textContent = '‚úÖ';
                        document.getElementById('gpsText').textContent = 'Location Detected!';
                        document.getElementById('gpsCoords').textContent = 
                            `Lat: ${userLocation.lat.toFixed(4)} | Lng: ${userLocation.lng.toFixed(4)}`;
                        
                        // Update mini map
                        map1.setView([userLocation.lat, userLocation.lng], 15);
                        vehicleMarker.setLatLng([userLocation.lat, userLocation.lng]);
                        
                        setTimeout(() => nextStep(), 1500);
                    },
                    error => {
                        document.getElementById('gpsIcon').textContent = '‚ùå';
                        document.getElementById('gpsText').textContent = 'GPS Failed - Use Demo';
                    },
                    { enableHighAccuracy: true, timeout: 10000, maximumAge: 60000 }
                );
            }
        }

        function useDelhiLocation() {
            userLocation = { lat: 28.6139, lng: 77.2090 };
            document.getElementById('gpsIcon').textContent = '‚úÖ';
            document.getElementById('gpsText').textContent = 'Delhi (Demo)';
            document.getElementById('gpsCoords').textContent = '28.6139, 77.2090';
            map1.setView([28.6139, 77.2090], 12);
            setTimeout(() => nextStep(), 1000);
        }

        function useMumbaiLocation() {
            userLocation = { lat: 19.0760, lng: 72.8774 };
            document.getElementById('gpsIcon').textContent = '‚úÖ';
            document.getElementById('gpsText').textContent = 'Mumbai (Demo)';
            document.getElementById('gpsCoords').textContent = '19.0760, 72.8774';
            map1.setView([19.0760, 72.8774], 12);
            setTimeout(() => nextStep(), 1000);
        }

        // STEP NAVIGATION
        function nextStep() {
            document.getElementById(`step${currentStep}`).classList.add('screen-hidden');
            currentStep++;
            document.getElementById(`step${currentStep}`).classList.remove('screen-hidden');
            initStepMaps();
        }

        // STEP 2: VEHICLE VERIFICATION
        function verifyVehicle() {
            const regNum = document.getElementById('regNumber').value.toUpperCase().trim();
            if (!rtoData[regNum]) {
                alert('Invalid registration. Demo: MH04AB1234');
                return;
            }
            
            currentVehicle = rtoData[regNum];
            document.getElementById('verifiedReg').textContent = regNum;
            document.getElementById('verifiedOwner').textContent = currentVehicle.owner;
            document.getElementById('verifiedDetails').textContent = currentVehicle.model;
            document.getElementById('vehiclePreview').classList.remove('hidden');
            
            setTimeout(() => nextStep(), 1500);
        }

        function loadCarModels() {
            const brand = document.getElementById('carBrand').value;
            const modelSelect = document.getElementById('carModel');
            modelSelect.innerHTML = '<option value="">Loading...</option>';
            modelSelect.disabled = true;
            
            setTimeout(() => {
                modelSelect.disabled = false;
                modelSelect.innerHTML = '<option value="">Select Model</option>';
                if (carModels[brand]) {
                    carModels[brand].forEach(model => {
                        modelSelect.innerHTML += `<option value="${model}">${model}</option>`;
                    });
                }
            }, 500);
        }

        // STEP 3: DYNAMIC ROUTE PLANNING
        function planDynamicRoute() {
            const destination = document.getElementById('destination').value;
            if (!destination || !userLocation) {
                alert('Please enter destination and ensure GPS is active');
                return;
            }

            // Clear previous route
            map2.eachLayer(layer => {
                if (layer instanceof L.Polyline) map2.removeLayer(layer);
            });

            // Simulate dynamic route from user location
            const route = [
                [userLocation.lat, userLocation.lng],
                [userLocation.lat + 0.5 * Math.random(), userLocation.lng + 0.5 * Math.random()],
                [parseFloat(destination.includes('Mumbai') ? '19.0760' : '12.9716'), 
                 parseFloat(destination.includes('Mumbai') ? '72.8774' : '77.5946')]
            ];

            L.polyline(route, {color: '#10B981', weight: 12}).addTo(map2);
            map2.fitBounds(L.latLngBounds(route));

            setTimeout(() => nextStep(), 2000);
        }

        // MAP INITIALIZATION
        function initStepMaps() {
            // Step 1 Mini Map
            if (!map1) {
                map1 = L.map('miniMap1').setView([28.6139, 77.2090], 10);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map1);
                vehicleMarker = L.marker([28.6139, 77.2090], {
                    icon: L.divIcon({
                        className: 'bg-emerald-500 p-4 rounded-full shadow-2xl border-4 border-white',
                        html: 'üöó',
                        iconSize: [40, 40]
                    })
                }).addTo(map1);
            }
        }

        useCurrentLocation();
    </script>
</body>
</html>
