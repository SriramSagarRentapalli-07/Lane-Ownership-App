<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lane Ownership Pro - DEMO READY</title>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBEbLeeT2G2czmJ5JMTckUj6qZJ3oqXg7k&libraries=places&callback=initGoogleMaps" async defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        *{font-family:'Inter',sans-serif;}
        .hud-font{font-family:'Orbitron',monospace;}
        
        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%),
                        url('https://images.unsplash.com/photo-1588137488142-b52cc277f4f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=3000&q=85') center/cover fixed;
            min-height: 100vh;
            color: white;
        }
        
        .glass{backdrop-filter:blur(30px);background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);box-shadow:0 25px 50px rgba(0,0,0,0.5);}
        .gradient-text{background:linear-gradient(135deg,#10B981 0%,#34D399 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        #map{height:500px;border-radius:20px;box-shadow:0 25px 50px rgba(0,0,0,0.6);}
        
        /* 3D CARS */
        .car-3d{width:55px;height:28px;border-radius:28px 28px 10px 10px;position:relative;box-shadow:0 10px 30px rgba(0,0,0,0.6);border:2px solid rgba(255,255,255,0.8);}
        .car-3d::before{content:'';position:absolute;top:8px;left:15px;width:14px;height:14px;background:rgba(255,255,255,0.9);border-radius:50%;box-shadow:inset 0 2px 3px rgba(0,0,0,0.3);}
        .car-3d::after{content:'';position:absolute;bottom:2px;left:10px;width:12px;height:12px;background:#6366F1;border-radius:50%;box-shadow:30px 0 0 0 #6366F1;}
        
        .maruti{background:linear-gradient(45deg,#10B981,#059669);}
        .tata{background:linear-gradient(45deg,#F59E0B,#D97706);}
        .hyundai{background:linear-gradient(45deg,#3B82F6,#1D4ED8);}
        .mahindra{background:linear-gradient(45deg,#EF4444,#DC2626);}
        .toyota{background:linear-gradient(45deg,#FBBF24,#F59E0B);}
        .honda{background:linear-gradient(45deg,#8B5CF6,#7C3AED);}
        .kia{background:linear-gradient(45deg,#EC4899,#DB2777);}
        .mg{background:linear-gradient(45deg,#06B6D4,#0891B2);}
        
        /* PERFECT INPUT */
        #destinationInput {
            color: white !important;
            background: rgba(0,0,0,0.4) !important;
            border: 2px solid rgba(255,255,255,0.3) !important;
            padding: 20px !important;
            font-size: 18px !important;
            border-radius: 16px !important;
        }
        #destinationInput:focus {
            border-color: #10B981 !important;
            box-shadow: 0 0 0 4px rgba(16,185,129,0.3) !important;
            outline: none !important;
        }
        #destinationInput::placeholder {color: rgba(255,255,255,0.6) !important;}
        
        /* AUTOCOMPLETE */
        .pac-container {z-index: 999999 !important;background: rgba(0,0,0,0.95) !important;border-radius: 12px !important;}
        .pac-item {color: white !important;padding: 16px !important;}
        .pac-item:hover {background: rgba(16,185,129,0.4) !important;}
        
        select {color: white !important;background: rgba(0,0,0,0.4) !important;border: 2px solid rgba(255,255,255,0.2) !important;padding-right: 40px !important;}
        select option {color: black !important;background: white !important;}
        
        .fade-in{animation:fadeIn 0.8s ease-out;}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    </style>
</head>
<body class="p-6 pt-20">
    
  <!-- LOGIN -->
  <div id="loginScreen" class="fixed inset-0 flex items-center justify-center z-50 bg-black/70 backdrop-blur-sm fade-in">
    <div class="glass rounded-3xl p-12 w-full max-w-lg mx-6 shadow-2xl max-h-[90vh] overflow-y-auto">
      <div class="text-center mb-8">
        <h1 class="text-4xl font-black gradient-text mb-4 hud-font">Vehicle Login</h1>
        <p class="text-white/70 text-lg">Complete details + GPS</p>
      </div>
      
      <!-- GPS -->
      <div class="mb-8">
        <label class="block text-lg font-semibold text-white/90 mb-4">üìç Location</label>
        <div id="gpsStatus" class="p-6 rounded-2xl bg-white/10 text-center mb-6">
          <div class="text-3xl mb-2" id="gpsIcon">üìç</div>
          <div class="text-lg font-semibold" id="gpsText">Turn on Location</div>
          <div class="text-sm text-white/60 mt-2" id="gpsCoords">-</div>
        </div>
        <div class="grid grid-cols-2 lg:grid-cols-3 gap-3">
          <button onclick="enableGPS()" class="glass p-4 rounded-2xl hover:bg-white/20 transition-all font-semibold flex flex-col items-center text-sm">
            <span class="text-2xl">üîì</span> Real GPS
          </button>
          <button onclick="useDelhiDemo()" class="glass p-4 rounded-2xl hover:bg-white/20 transition-all font-semibold flex flex-col items-center text-sm">
            <span class="text-xl">üèõÔ∏è</span> Delhi
          </button>
          <button onclick="useMumbaiDemo()" class="glass p-4 rounded-2xl hover:bg-white/20 transition-all font-semibold flex flex-col items-center text-sm">
            <span class="text-xl">üèôÔ∏è</span> Mumbai
          </button>
        </div>
      </div>
      
      <!-- FORM -->
      <div class="space-y-4">
        <input id="regNumber" type="text" placeholder="MH04AB1234" maxlength="13" class="w-full p-4 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-500 text-lg font-bold uppercase">
        <select id="company" onchange="loadVehicleTypes()" class="w-full p-4 text-lg font-bold">
          <option value="">Select Company</option>
          <optgroup label="üáÆüá≥ Indian Brands">
            <option value="maruti">Maruti Suzuki</option>
            <option value="tata">Tata Motors</option>
            <option value="mahindra">Mahindra</option>
          </optgroup>
          <optgroup label="üåç Global Brands">
            <option value="hyundai">Hyundai</option>
            <option value="toyota">Toyota</option>
            <option value="honda">Honda</option>
            <option value="kia">Kia</option>
            <option value="mg">MG Motor</option>
          </optgroup>
        </select>
        <select id="vehicleType" onchange="loadModels()" disabled class="w-full p-4 text-lg font-bold">
          <option value="">Select Type</option>
        </select>
        <select id="vehicleModel" disabled class="w-full p-4 text-lg font-bold">
          <option value="">Select Model</option>
        </select>
      </div>
      
      <button onclick="verifyVehicle()" class="w-full mt-8 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-black py-5 px-8 rounded-3xl shadow-2xl hover:shadow-3xl transform hover:-translate-y-2 transition-all duration-500 text-xl">
        üöÄ Start Navigation
      </button>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div id="mainApp" class="hidden min-h-screen">
    <div class="glass rounded-3xl p-6 mb-8 shadow-2xl flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 max-w-6xl mx-auto">
      <div class="flex items-center">
        <div class="w-16 h-16 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mr-4 shadow-2xl" id="vehiclePreview">
          <div class="car-3d maruti" style="width:50px;height:25px;"></div>
        </div>
        <div>
          <h1 class="text-3xl lg:text-4xl font-black gradient-text hud-font">Lane Ownership Pro</h1>
          <p class="text-lg text-white/80" id="vehicleInfo">-</p>
        </div>
      </div>
      <div class="flex gap-4">
        <div class="text-right bg-white/10 p-4 rounded-2xl">
          <div class="text-2xl font-black text-emerald-400" id="liveVehicles">24,847</div>
          <div class="text-sm text-white/60">Live Vehicles</div>
        </div>
        <button onclick="toggleSatellite()" class="glass px-6 py-3 rounded-xl text-sm font-semibold hover:bg-white/20">üõ∞Ô∏è Satellite</button>
        <button onclick="logout()" class="glass px-6 py-3 rounded-xl text-sm font-semibold hover:bg-white/20">Logout</button>
      </div>
    </div>

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 px-6">
      <div class="glass rounded-3xl p-8 shadow-2xl">
        <h2 class="text-2xl font-bold mb-6 flex items-center gradient-text">üõ∞Ô∏è Live Tracking</h2>
        <div id="map"></div>
        <div class="flex gap-3 mt-4">
          <button onclick="centerVehicle()" class="flex-1 p-3 bg-white/20 hover:bg-white/30 rounded-xl font-medium">üìç Track Car</button>
          <button onclick="clearRoutes()" class="flex-1 p-3 bg-white/20 hover:bg-white/30 rounded-xl font-medium">üóëÔ∏è Clear</button>
        </div>
      </div>

      <div class="glass rounded-3xl p-8 shadow-2xl">
        <h2 class="text-2xl font-bold mb-8 flex items-center gradient-text">üß≠ Route Planner</h2>
        <div class="space-y-6">
          <div>
            <label class="block text-sm font-semibold text-white/90 mb-3">üìç Start</label>
            <div class="p-6 bg-black/40 border border-white/20 rounded-2xl text-center text-xl font-bold text-emerald-400" id="startLocation">GPS Active</div>
          </div>
          
          <div>
            <label class="block text-sm font-semibold text-white/90 mb-3">üéØ Destination</label>
            <input id="destinationInput" type="text" placeholder="Type Mumbai, Delhi, Pune, Bangalore..." class="w-full p-5 text-lg font-bold rounded-2xl">
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div class="p-5 bg-black/40 border border-white/20 rounded-2xl text-center">
              <div class="text-2xl font-black text-emerald-400" id="distanceDisplay">-</div>
              <div class="text-xs text-white/70">Distance</div>
            </div>
            <div class="p-5 bg-black/40 border border-white/20 rounded-2xl text-center">
              <div class="text-2xl font-black text-blue-400" id="timeDisplay">-</div>
              <div class="text-xs text-white/70">ETA</div>
            </div>
          </div>
          
          <button onclick="calculateRoute()" class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-black py-6 px-8 rounded-3xl shadow-2xl hover:shadow-3xl transform hover:-translate-y-2 transition-all text-xl">
            üß† Calculate Route
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let map, userVehicleMarker, currentRoute, userLocation = {lat: 28.6139, lng: 77.2090};
    let gpsActive = false, vehicleData = null, isSatellite = false;
    let autocomplete;
    
    const indianVehicles = {
      maruti: {name: "Maruti Suzuki", types: {hatchback: ["Swift"], suv: ["Brezza"]}},
      tata: {name: "Tata Motors", types: {hatchback: ["Punch"], suv: ["Nexon"]}},
      mahindra: {name: "Mahindra", types: {suv: ["Thar"]}},
      hyundai: {name: "Hyundai", types: {suv: ["Creta"]}},
      toyota: {name: "Toyota", types: {suv: ["Fortuner"]}},
      honda: {name: "Honda", types: {sedan: ["City"]}},
      kia: {name: "Kia", types: {suv: ["Seltos"]}},
      mg: {name: "MG Motor", types: {suv: ["Hector"]}}
    };

    function loadVehicleTypes() {
      const company = document.getElementById('company').value;
      const typeSelect = document.getElementById('vehicleType');
      typeSelect.innerHTML = '<option value="">Select Type</option>';
      typeSelect.disabled = !company;
      if (company && indianVehicles[company]) {
        Object.keys(indianVehicles[company].types).forEach(type => {
          typeSelect.innerHTML += `<option value="${type}">${type.charAt(0).toUpperCase()+type.slice(1)}</option>`;
        });
      }
    }

    function loadModels() {
      const company = document.getElementById('company').value;
      const type = document.getElementById('vehicleType').value;
      const modelSelect = document.getElementById('vehicleModel');
      modelSelect.innerHTML = '<option value="">Select Model</option>';
      modelSelect.disabled = !type || !company;
      if (company && type && indianVehicles[company]?.types[type]) {
        indianVehicles[company].types[type].forEach(model => {
          modelSelect.innerHTML += `<option value="${model}">${model}</option>`;
        });
      }
    }

    function enableGPS() {
      document.getElementById('gpsIcon').textContent = '‚úÖ';
      document.getElementById('gpsText').textContent = 'GPS Active';
      gpsActive = true;
      navigator.geolocation.getCurrentPosition(pos => {
        userLocation = {lat: pos.coords.latitude, lng: pos.coords.longitude};
        document.getElementById('gpsCoords').textContent = `${userLocation.lat.toFixed(4)}, ${userLocation.lng.toFixed(4)}`;
      });
    }

    function useDelhiDemo() { 
      userLocation = {lat: 28.6139, lng: 77.2090}; 
      document.getElementById('gpsText').textContent = 'Delhi Demo'; 
      gpsActive = true;
      document.getElementById('gpsCoords').textContent = '28.6139, 77.2090';
    }

    function useMumbaiDemo() { 
      userLocation = {lat: 19.0760, lng: 72.8774}; 
      document.getElementById('gpsText').textContent = 'Mumbai Demo'; 
      gpsActive = true;
      document.getElementById('gpsCoords').textContent = '19.0760, 72.8774';
    }

    function verifyVehicle() {
      const regNum = document.getElementById('regNumber').value.trim();
      const company = document.getElementById('company').value;
      const type = document.getElementById('vehicleType').value;
      const model = document.getElementById('vehicleModel').value;
      
      if (!regNum || !company || !type || !model || !gpsActive) {
        alert('Fill ALL fields + GPS!');
        return;
      }
      
      vehicleData = {
        regNum, company, type, model,
        fullName: `${indianVehicles[company].name} ${model}`,
        cssClass: company
      };
      
      document.getElementById('vehicleInfo').textContent = `${vehicleData.fullName} ‚Ä¢ ${regNum}`;
      document.getElementById('vehiclePreview').innerHTML = `<div class="car-3d ${vehicleData.cssClass}" style="width:50px;height:25px;"></div>`;
      
      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('mainApp').classList.remove('hidden');
      
      setTimeout(() => {
        initMap();
        document.getElementById('startLocation').textContent = `GPS: ${userLocation.lat.toFixed(4)}, ${userLocation.lng.toFixed(4)}`;
        initAutocomplete();
      }, 100);
    }

    function initMap() {
      map = L.map('map').setView([userLocation.lat, userLocation.lng], 14);
      
      const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}');
      const street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
      
      map.addLayer(street);
      window.layers = {street, satellite};
      
      const carIcon = L.divIcon({
        html: `<div class="car-3d ${vehicleData.cssClass}" style="width:60px;height:32px;transform:rotate(45deg);"></div>`,
        iconSize: [60, 32], iconAnchor: [30, 32], className: ''
      });
      
      userVehicleMarker = L.marker([userLocation.lat, userLocation.lng], {icon: carIcon}).addTo(map)
        .bindPopup(`<b>${vehicleData.fullName}</b><br>${vehicleData.regNum}`);
    }

    function initAutocomplete() {
      const input = document.getElementById('destinationInput');
      autocomplete = new google.maps.places.Autocomplete(input, {
        types: ['(cities)'],
        componentRestrictions: {country: 'in'}
      });
    }

    function toggleSatellite() {
      if (isSatellite) {
        map.addLayer(window.layers.street);
        map.removeLayer(window.layers.satellite);
        isSatellite = false;
      } else {
        map.addLayer(window.layers.satellite);
        map.removeLayer(window.layers.street);
        isSatellite = true;
      }
    }

    function calculateRoute() {
      const destination = document.getElementById('destinationInput').value;
      if (!destination) return alert('Type destination!');
      
      if (currentRoute) map.removeLayer(currentRoute);
      
      const directionsService = new google.maps.DirectionsService();
      directionsService.route({
        origin: new google.maps.LatLng(userLocation.lat, userLocation.lng),
        destination: destination,
        travelMode: google.maps.TravelMode.DRIVING
      }, (response, status) => {
        if (status === 'OK') {
          const route = response.routes[0].legs[0];
          document.getElementById('distanceDisplay').textContent = route.distance.text;
          document.getElementById('timeDisplay').textContent = route.duration.text;
          
          const path = response.routes[0].overview_path.map(p => [p.lat(), p.lng()]);
          currentRoute = L.polyline(path, {
            color: getBrandColor(vehicleData.company),
            weight: 8
          }).addTo(map);
          
          map.fitBounds(currentRoute.getBounds());
        } else {
          alert('Try: Mumbai, Delhi, Bangalore, Pune');
        }
      });
    }

    function getBrandColor(company) {
      const colors = {maruti:'#10B981', tata:'#F59E0B', hyundai:'#3B82F6', mahindra:'#EF4444', toyota:'#FBBF24', honda:'#8B5CF6', kia:'#EC4899', mg:'#06B6D4'};
      return colors[company] || '#10B981';
    }

    function centerVehicle() { map.setView(userVehicleMarker.getLatLng(), 18); }
    function clearRoutes() { 
      if (currentRoute) map.removeLayer(currentRoute); 
      currentRoute = null;
      document.getElementById('distanceDisplay').textContent = '-';
      document.getElementById('timeDisplay').textContent = '-';
    }
    function logout() {
      document.getElementById('mainApp').classList.add('hidden');
      document.getElementById('loginScreen').classList.remove('hidden');
    }

    setInterval(() => {
      document.getElementById('liveVehicles').textContent = (24000 + Math.floor(Math.random() * 5000)).toLocaleString();
    }, 3000);

    function initGoogleMaps() {
      console.log('Google Maps loaded');
    }
  </script>
</body>
</html>
